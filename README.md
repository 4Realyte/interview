# Transaction with Inner Method
В данной ветке проверяется понимание работы механизмов Aop-proxy Spring на примере @Transactional
Данную ветку рекомендуется показывать после ветки exception

## Этапы проверки
1. Продемонстрировать код приложения
2. Спросить у кандидата, сохранится ли книга, и если да, то с каким заголовком
3. Запустить приложение, книга сохранится с заголовком "short"
4. Спросить у кандидата, почему так произошло и как сделать так, чтобы книга НЕ сохранилась, как происходило в ветке exception

## Ожидаемые ответы
1. Книга сохранилась, потому что @Transactional работает с proxy-механизмами спринга. Фактически создается proxy-объект,
который перехватывает вызовы к нашему сервису, оборачивая их дополнительной логикой. Однако приватные методы не могут быть обернуты,
поскольку являются финальными по умолчанию и не доступны для наследования. Механизмам AOP ничего не известно о внутренних
вызовах внутри оборачиваемого метода, поэтому фактически транзакция не открылась.
2. Чтобы книга все же НЕ сохранилась можно:
- Сделать self-inject (не забыть allow-circular-references), либо через beanFactory.getBean(Some.class)
- Вынести метод в другой класс
- Использовать TransactionTemplate

## Справочная информация
- При старте приложения добавляется автор с именем "Alexey" и возрастом 45 лет с помощью [файла](./src/main/resources/data.sql)
- Используется in-memory db h2. Консоль для работы с базой доступна по адресу: http://localhost:8080/h2-console
- Open session in view = false
- Код запускается с помощью CommandLineRunner при старте приложения